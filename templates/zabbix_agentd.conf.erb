# This is a config file for Zabbix Agent (Unix)
# To get more information about Zabbix, visit http://www.zabbix.com

############ GENERAL PARAMETERS #################

### Option: PidFile
# Name of PID file.
#
# Mandatory: no
# Default:
# PidFile=/tmp/zabbix_agentd.pid
<% if @pidfile != '' %>
PidFile=<%= @pidfile %>
<% end %>

### Option: LogFile
# Name of log file.
# If not set, syslog is used.
#
# Mandatory: no
# Default:
# LogFile=
<% if @logfile != '' %>
LogFile=<%= @logfile %>
<% end %>

### Option: LogFileSize
# Maximum size of log file in MB.
# 0 - disable automatic log rotation.
#
# Mandatory: no
# Range: 0-1024
# Default:
# LogFileSize=1
<% if @logfilesize != '' %>
LogFileSize=<%= @logfilesize %>
<% end %>

### Option: DebugLevel
# Specifies debug level
# 0 - no debug
# 1 - critical information
# 2 - error information
# 3 - warnings
# 4 - for debugging (produces lots of information)
#
# Mandatory: no
# Range: 0-4
# Default:
# DebugLevel=3
<% if @debuglevel != '' %>
DebugLevel=<%= @debuglevel %>
<% end %>

### Option: SourceIP
# Source IP address for outgoing connections.
#
# Mandatory: no
# Default:
# SourceIP=
<% if @sourceip != '' %>
SourceIP=<%= @sourceip %>
<% end %>

### Option: EnableRemoteCommands
# Whether remote commands from Zabbix server are allowed.
# 0 - not allowed
# 1 - allowed
#
# Mandatory: no
# Default:
# EnableRemoteCommands=0
<% if @enableremotecommands != '' %>
EnableRemoteCommands=<%= @enableremotecommands %>
<% end %>

### Option: LogRemoteCommands
# Enable logging of executed shell commands as warnings.
# 0 - disabled
# 1 - enabled
#
# Mandatory: no
# Default:
# LogRemoteCommands=0
<% if @logremotecommands != '' %>
LogRemoteCommands=<%= @logremotecommands %>
<% end %>


##### Passive checks related

### Option: Server
# List of comma delimited IP addresses (or hostnames) of Zabbix servers.
# No spaces allowed. First entry is used for receiving list of and sending active checks.
# If IPv6 support is enabled then '127.0.0.1', '::127.0.0.1', '::ffff:127.0.0.1' are treated equally.
#
# Mandatory: yes
# Default:
# Server=
<% if @server != '' %>
Server=<%= @server %>
<% end %>

### Option: ServerActive
# List of comma delimited IP:port (or hostname:port) pairs of Zabbix servers for active checks. 
# No spaces allowed.
# If port is not specified, default port is used.
# IPv6 addresses must be enclosed in square brackets if port for that host is specified.
# If port is not specified, square brackets for IPv6 addresses are optional.
# If this parameter is not specified, active checks are disabled.
# Mandatory: no
# Default: 
# ServerActive=
<% if @serveractive != '' %>
ServerActive=<%= @serveractive %>
<% end %>

### Option: Hostname
# Unique, case sensitive hostname.
# Required for active checks and must match hostname as configured on the server.
# Value is acquired from HostnameItem if undefined.
#
# Mandatory: no
# Default:
# Hostname=
<% if @hostname != '' %>
Hostname=<%= @hostname %>
<% end %>

### Option: HostnameItem
# Item used for generating Hostname if it is undefined.
# Ignored if Hostname is defined.
#
# Mandatory: no
# Default:
# HostnameItem=system.hostname
<% if @hostnameitem != '' %>
HostnameItem=<%= @hostnameitem %>
<% end %>

### Option: ListenPort
# Agent will listen on this port for connections from the server.
#
# Mandatory: no
# Range: 1024-32767
# Default:
# ListenPort=10050
<% if @listenport != '' %>
ListenPort=<%= @listenport %>
<% end %>

### Option: ListenIP
# List of comma delimited IP addresses that the agent should listen on.
#
# Mandatory: no
# Default:
# ListenIP=0.0.0.0
<% if @listenip != '' %>
ListenIP=<%= @listenip %>
<% end %>

##### Active checks related

### Option: RefreshActiveChecks
# How often list of active checks is refreshed, in seconds.
#
# Mandatory: no
# Range: 60-3600
# Default:
# RefreshActiveChecks=120
<% if @refreshactivechecks != '' %>
RefreshActiveChecks=<%= @refreshactivechecks %>
<% end %>

### Option: BufferSend
# Do not keep data longer than N seconds in buffer.
#
# Mandatory: no
# Range: 1-3600
# Default:
# BufferSend=5
<% if @buffersend != '' %>
BufferSend=<%= @buffersend %>
<% end %>

### Option: BufferSize
# Maximum number of values in a memory buffer. The agent will send
# all collected data to Zabbix Server or Proxy if the buffer is full.
#
# Mandatory: no
# Range: 2-65535
# Default:
# BufferSize=100
<% if @buffersize != '' %>
BufferSize=<%= @buffersize %>
<% end %>

### Option: MaxLinesPerSecond
# Maximum number of new lines the agent will send per second to Zabbix Server
# or Proxy processing 'log' and 'logrt' active checks.
# The provided value will be overridden by the parameter 'maxlines',
# provided in 'log' or 'logrt' item keys.
#
# Mandatory: no
# Range: 1-1000
# Default:
# MaxLinesPerSecond=100
<% if @maxlinespersecond != '' %>
MaxLinesPerSecond=<%= @maxlinespersecond %>
<% end %>

### Option: AllowRoot
# Allow the agent to run as 'root'. If disabled and the agent is started by 'root', the agent
#       will try to switch to user 'zabbix' instead. Has no effect if started under a regular user.
# 0 - do not allow
# 1 - allow
#
# Mandatory: no
# Default:
# AllowRoot=0
<% if @allowroot != '' %>
AllowRoot=<%= @allowroot %>
<% end %>

############ ADVANCED PARAMETERS #################

### Option: Alias
# Sets an alias for parameter. It can be useful to substitute long and complex parameter name with a smaller and simpler one.
#
# Mandatory: no
# Range:
# Default:
# Alias=
<% if @alias_ != '' %>
Alias=<%= @alias_ %>
<% end %>



### Option: StartAgents
# Number of pre-forked instances of zabbix_agentd that process passive checks.
#
# Mandatory: no
# Range: 1-100
# Default:
# StartAgents=3
<% if @startagents != '' %>
StartAgents=<%= @startagents %>
<% end %>

### Option: Timeout
# Spend no more than Timeout seconds on processing
#
# Mandatory: no
# Range: 1-30
# Default:
# Timeout=3
<% if @timeout != '' %>
Timeout=<%= @timeout %>
<% end %>

### Option: Include
# You may include individual files or all files in a directory in the configuration file.
#
# Mandatory: no
# Default:
# Include=
# Include=/etc/zabbix/zabbix_agentd.userparams.conf
# Include=/etc/zabbix/zabbix_agentd/
<% if @include != '' %>
Include=<%= @include %>
<% end %>

####### USER-DEFINED MONITORED PARAMETERS #######

### Option: UnsafeUserParameters
# Allow all characters to be passed in arguments to user-defined parameters.
# 0 - do not allow
# 1 - allow
#
# Mandatory: no
# Range: 0-1
# Default:
# UnsafeUserParameters=0
<% if @unsafeuserparameters != '' %>
UnsafeUserParameters=<%= @unsafeuserparameters %>
<% end %>

### Option: UserParameter
# User-defined parameter to monitor. There can be several user-defined parameters.
# Format: UserParameter=<key>,<shell command>
# Note that shell command must not return empty string or EOL only.
# See 'zabbix_agentd' directory for examples.
#
# Mandatory: no
# Default:
# UserParameter=
<% if @userparameter != '' %>
UserParameter=<%= @userparameter %>
<% end %>

### Option: HostMetadataItem
# Optional parameter that defines a Zabbix agent item used for getting host metadata. 
# This option is only used when HostMetadata is not defined.
# Supports UserParameters and aliases. Supports system.run[] regardless of EnableRemoteCommands value.
# Host metadata is used only at host auto-registration process (active agent).
# During an auto-registration request an agent will log a warning message if
# the value returned by the specified item is over the limit of 255 characters.
# The value returned by the item must be a UTF-8 string otherwise it will be ignored.
# This option is supported in version 2.2.0 and higher.
#
# Mandatory: no
# Default:
# HostMetadataItem=
<% if @hostmetadataitem != '' %>
HostMetadataItem=<%= @hostmetadataitem %>
<% end %>